{"ast":null,"code":"import React,{useState}from'react';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserProfile=()=>{var _user$user_metadata,_user$user_metadata2,_user$user_metadata4;const{user,signOut,updateProfile}=useAuth();const[isEditing,setIsEditing]=useState(false);const[displayName,setDisplayName]=useState((user===null||user===void 0?void 0:(_user$user_metadata=user.user_metadata)===null||_user$user_metadata===void 0?void 0:_user$user_metadata.full_name)||'');const[loading,setLoading]=useState(false);const handleUpdateProfile=async()=>{setLoading(true);try{await updateProfile({data:{full_name:displayName}});setIsEditing(false);}catch(error){console.error('Error updating profile:',error);}setLoading(false);};const handleSignOut=async()=>{setLoading(true);try{await signOut();}catch(error){console.error('Error signing out:',error);}setLoading(false);};if(!user)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 bg-red-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-lg\",children:user.email?user.email[0].toUpperCase():user.phone?user.phone.slice(-1):'U'})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white\",children:((_user$user_metadata2=user.user_metadata)===null||_user$user_metadata2===void 0?void 0:_user$user_metadata2.full_name)||'User'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:user.email||user.phone})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Display Name\"}),isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:displayName,onChange:e=>setDisplayName(e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\",placeholder:\"Enter your name\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdateProfile,disabled:loading,className:\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50\",children:loading?'Saving...':'Save'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _user$user_metadata3;setIsEditing(false);setDisplayName((user===null||user===void 0?void 0:(_user$user_metadata3=user.user_metadata)===null||_user$user_metadata3===void 0?void 0:_user$user_metadata3.full_name)||'');},className:\"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900 dark:text-white\",children:((_user$user_metadata4=user.user_metadata)===null||_user$user_metadata4===void 0?void 0:_user$user_metadata4.full_name)||'Not set'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(true),className:\"text-red-600 hover:text-red-500 dark:text-red-400 dark:hover:text-red-300 text-sm font-medium\",children:\"Edit\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Contact Information\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 dark:text-white\",children:user.email||user.phone})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Account Created\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 dark:text-white\",children:new Date(user.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-4 border-t border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSignOut,disabled:loading,className:\"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50\",children:loading?'Signing out...':'Sign Out'})})]})]});};export default UserProfile;","map":{"version":3,"names":["React","useState","useAuth","jsx","_jsx","jsxs","_jsxs","UserProfile","_user$user_metadata","_user$user_metadata2","_user$user_metadata4","user","signOut","updateProfile","isEditing","setIsEditing","displayName","setDisplayName","user_metadata","full_name","loading","setLoading","handleUpdateProfile","data","error","console","handleSignOut","className","children","email","toUpperCase","phone","slice","type","value","onChange","e","target","placeholder","onClick","disabled","_user$user_metadata3","Date","created_at","toLocaleDateString"],"sources":["D:/Blood Bank/src/components/UserProfile.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst UserProfile = () => {\r\n  const { user, signOut, updateProfile } = useAuth();\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [displayName, setDisplayName] = useState(user?.user_metadata?.full_name || '');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleUpdateProfile = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await updateProfile({\r\n        data: { full_name: displayName }\r\n      });\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSignOut = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await signOut();\r\n    } catch (error) {\r\n      console.error('Error signing out:', error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg p-6\">\r\n      <div className=\"flex items-center space-x-4 mb-6\">\r\n        <div className=\"flex-shrink-0\">\r\n          <div className=\"h-12 w-12 bg-red-600 rounded-full flex items-center justify-center\">\r\n            <span className=\"text-white font-semibold text-lg\">\r\n              {user.email ? user.email[0].toUpperCase() : \r\n               user.phone ? user.phone.slice(-1) : 'U'}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex-1 min-w-0\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\r\n            {user.user_metadata?.full_name || 'User'}\r\n          </h3>\r\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n            {user.email || user.phone}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Display Name\r\n          </label>\r\n          {isEditing ? (\r\n            <div className=\"flex space-x-2\">\r\n              <input\r\n                type=\"text\"\r\n                value={displayName}\r\n                onChange={(e) => setDisplayName(e.target.value)}\r\n                className=\"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                placeholder=\"Enter your name\"\r\n              />\r\n              <button\r\n                onClick={handleUpdateProfile}\r\n                disabled={loading}\r\n                className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50\"\r\n              >\r\n                {loading ? 'Saving...' : 'Save'}\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setIsEditing(false);\r\n                  setDisplayName(user?.user_metadata?.full_name || '');\r\n                }}\r\n                className=\"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-gray-900 dark:text-white\">\r\n                {user.user_metadata?.full_name || 'Not set'}\r\n              </span>\r\n              <button\r\n                onClick={() => setIsEditing(true)}\r\n                className=\"text-red-600 hover:text-red-500 dark:text-red-400 dark:hover:text-red-300 text-sm font-medium\"\r\n              >\r\n                Edit\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Contact Information\r\n          </label>\r\n          <p className=\"text-gray-900 dark:text-white\">\r\n            {user.email || user.phone}\r\n          </p>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Account Created\r\n          </label>\r\n          <p className=\"text-gray-900 dark:text-white\">\r\n            {new Date(user.created_at).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n          <button\r\n            onClick={handleSignOut}\r\n            disabled={loading}\r\n            className=\"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50\"\r\n          >\r\n            {loading ? 'Signing out...' : 'Sign Out'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}